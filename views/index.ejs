<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Test Bed</title>
  <script src="js/tracking.js"></script>
  <link rel="stylesheet" href="css/example.css">
</head>
<body>
    <h1>Hello World</h1>

  <div class="demo">
    <video id="myVideo" width="600" height="450" preload autoplay loop muted></video>
    <canvas id="canvas" width="600" height="450"></canvas>
  </div>

  <script>
  var canvas = document.getElementById('canvas');
  var context = canvas.getContext('2d');

  tracking.ColorTracker.registerColor('skin', function(r,g,b) {
    var threshold = 10,
     dr = r - 204,
     dg = g - 148,
     db = b - 148;

     if( dr >= threshold && dg >= threshold && db >= threshold) {
       return true;
     }
     return false;
  });

  var colors = new tracking.ColorTracker(['skin']);

  colors.on('track', function(event) {
    if (event.data.length === 0) {
      // No skin tone was detected in this frame.
    } 
    else {
      event.data.forEach(function(rect) {
        console.log(rect.x, rect.y, rect.height, rect.width, rect.color);

          context.strokeStyle = "#000";
          context.strokeRect(rect.x, rect.y, rect.width, rect.height);
          context.font = '11px Helvetica';
          context.fillStyle = "#fff";
          context.fillText('x: ' + rect.x + 'px', rect.x + rect.width + 5, rect.y + 11);
          context.fillText('y: ' + rect.y + 'px', rect.x + rect.width + 5, rect.y + 22);

      });
    }
  });

  tracking.track('#myVideo', colors, {camera: true});
  </script>
</body>
</html>